# Use Node.js 20 as the base image
FROM node:20

# Set the working directory
WORKDIR /app/client

# Copy client package.json and package-lock.json
COPY package*.json ./

# Install dependencies with legacy-peer-deps for potential compatibility
RUN npm install --legacy-peer-deps

# Copy entire client folder
COPY . .

# Explicitly install @babel plugin to resolve potential build issues
RUN npm install --save-dev @babel/plugin-proposal-private-property-in-object

# Build React app
RUN npm run build